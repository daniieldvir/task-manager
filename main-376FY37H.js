import{a as it}from"./chunk-VMHCMT5G.js";import{a as j,c as H,d as R,e as V,f as W,g as J,h as $,i as u,j as K,k as Q,l as X,m as b,n as Z,o as tt,p as et,r as nt,s as rt,u as at,v as lt,w as gt,x as ct}from"./chunk-P76IDE6A.js";import{$ as s,B as v,Ca as d,Fa as T,Ia as L,J as c,Ja as D,Ka as N,La as G,M as p,Ma as B,Na as Y,Ra as q,S as x,Sa as U,T as y,Ta as ot,Y as w,Z as r,_ as i,aa as m,ba as M,ca as S,ea as k,fa as A,ga as E,ha as F,na as z,pa as l,qa as I,t as a,x as _,y as P}from"./chunk-4ASC3FQQ.js";var h=class e{isOAuthLoading=!1;supabaseService=a(it);async loginWithOAuth(n){this.isOAuthLoading=!0;try{await this.supabaseService.signInWithOAuth(n)}catch(t){console.error("OAuth login error:",t),this.isOAuthLoading=!1}}loginWithGoogle(){this.loginWithOAuth("google")}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=p({type:e,selectors:[["app-oauth-buttons"]],decls:9,vars:3,consts:[[1,"oauth-container"],["type","button","aria-label","Sign in with Google",1,"oauth-btn","google",3,"click","disabled"],["viewBox","0 0 24 24","width","20","height","20"],["fill","#4285F4","d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"],["fill","#34A853","d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"],["fill","#FBBC05","d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"],["fill","#EA4335","d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"]],template:function(t,o){t&1&&(m(0,"div",0)(1,"button",1),E("click",function(){return o.loginWithGoogle()}),_(),m(2,"svg",2),S(3,"path",3)(4,"path",4)(5,"path",5)(6,"path",6),M(),P(),m(7,"span"),l(8,"Sign in with Google"),M()()()),t&2&&(z("loading",o.isOAuthLoading),c(),k("disabled",o.isOAuthLoading))},dependencies:[d],styles:["[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   .oauth-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;width:100%}[_nghost-%COMP%]   .oauth-container.loading[_ngcontent-%COMP%]{opacity:.7;pointer-events:none}[_nghost-%COMP%]   .oauth-container[_ngcontent-%COMP%]   .oauth-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.625rem;padding:.75rem 1rem;border-radius:.5rem;border:1px solid var(--border-primary);background:var(--bg-primary);color:var(--text-primary);font-size:.95rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease;width:100%}[_nghost-%COMP%]   .oauth-container[_ngcontent-%COMP%]   .oauth-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}[_nghost-%COMP%]   .oauth-container[_ngcontent-%COMP%]   .oauth-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap}[_nghost-%COMP%]   .oauth-container[_ngcontent-%COMP%]   .oauth-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:var(--border-secondary);transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}[_nghost-%COMP%]   .oauth-container[_ngcontent-%COMP%]   .oauth-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}[_nghost-%COMP%]   .oauth-container[_ngcontent-%COMP%]   .oauth-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}[_nghost-%COMP%]   .oauth-container[_ngcontent-%COMP%]   .oauth-btn.google[_ngcontent-%COMP%]:hover:not(:disabled){background:#fff;border-color:#4285f4}[data-theme=dark]   [_nghost-%COMP%]   .oauth-container[_ngcontent-%COMP%]   .oauth-btn.google[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff1a;border-color:#4285f4}"]})};function Ct(e,n){if(e&1&&(r(0,"div",6),l(1),i()),e&2){let t=F();c(),I(t.authError())}}var f=class e{loginForm=new X({email:new b("",{validators:[u.required,u.email]}),password:new b("",{validators:[u.required]})});authError=U(lt.slices.error);store=a(Y);login(){let{email:n,password:t}=this.loginForm.getRawValue();if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}!n||!t||this.store.dispatch(new ot.LoginUser({email:n,password:t}))}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=p({type:e,selectors:[["app-login"]],decls:18,vars:2,consts:[[1,"login-page"],[1,"login-header"],[1,"login-form"],[3,"ngSubmit","formGroup"],["type","email","formControlName","email","placeholder","Email","autocomplete","email"],["type","password","formControlName","password","placeholder","Password","autocomplete","current-password"],[1,"error-message"],[1,"button-container"],["type","submit","label","Login","variant","primary"],[1,"divider"],[1,"oauth-buttons"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"div",1)(2,"h1"),l(3,"Welcome to Task Manager"),i(),r(4,"p"),l(5,"Please enter your email and password to login"),i()(),r(6,"div",2)(7,"form",3),A("ngSubmit",function(){return o.login()}),s(8,"input",4)(9,"input",5),x(10,Ct,2,1,"div",6),r(11,"div",7),s(12,"app-button",8),i()(),r(13,"div",9)(14,"span"),l(15,"Or login with"),i()(),r(16,"div",10),s(17,"app-oauth-buttons"),i()()()),t&2&&(c(7),w("formGroup",o.loginForm),c(3),y(o.authError()?10:-1))},dependencies:[d,nt,Z,$,K,Q,et,tt,rt,h],styles:['[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:var(--login-bg, var(--bg-primary));padding:1rem;position:relative;overflow-x:hidden}[_nghost-%COMP%]:before{content:"";position:absolute;inset:0;pointer-events:none;z-index:0;opacity:.5;background:radial-gradient(circle at 20% 30%,rgba(59,130,246,.08) 0%,transparent 50%),radial-gradient(circle at 80% 70%,rgba(139,92,246,.08) 0%,transparent 50%)}[data-theme=light]   [_nghost-%COMP%]:before{opacity:.3;background:radial-gradient(circle at 20% 30%,rgba(37,99,235,.05) 0%,transparent 50%),radial-gradient(circle at 80% 70%,rgba(99,102,241,.05) 0%,transparent 50%)}@media(max-width:768px){[_nghost-%COMP%]{padding:.75rem}}.login-page[_ngcontent-%COMP%]{position:relative;z-index:1;width:100%;max-width:420px;display:flex;flex-direction:column;gap:2rem}@media(max-width:768px){.login-page[_ngcontent-%COMP%]{gap:1.5rem}}.login-page[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]{text-align:center}.login-page[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:2rem;font-weight:700;color:var(--text-primary);letter-spacing:-.02em;line-height:1.2}@media(max-width:768px){.login-page[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}.login-page[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-secondary);font-size:1rem;line-height:1.6}@media(max-width:768px){.login-page[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem}}.login-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;background:var(--login-form-bg);padding:2.5rem 3rem;border-radius:1rem;border:1px solid var(--card-border);box-shadow:0 4px 20px var(--login-form-shadow);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .3s ease;width:375px}.login-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]:hover{border-color:var(--border-secondary);box-shadow:0 6px 24px var(--login-form-shadow)}@media(max-width:768px){.login-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{padding:2rem 1.5rem;border-radius:.875rem}}.login-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;flex:1;align-items:center}.login-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border-radius:.5rem;border:1px solid var(--login-input-border);background:var(--login-input-focus-bg);color:var(--text-primary);font-size:.95rem;font-family:inherit;transition:border-color .2s ease,box-shadow .2s ease,background-color .2s ease}.login-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.login-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--login-input-focus);box-shadow:0 0 0 3px var(--login-input-focus-shadow)}@media(max-width:768px){.login-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.625rem .875rem;font-size:.875rem}}.login-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:.25rem;font-size:.75rem;color:var(--btn-danger-hover);background:#b91c1c1a;border:1px solid rgba(248,113,113,.4);border-radius:.5rem;padding:.5rem .75rem;width:100%;min-height:2.5rem;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease,visibility .2s ease}@media(max-width:768px){.login-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:.6875rem;padding:.4375rem .625rem;margin-top:.5rem;min-height:2.25rem}}.login-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.75rem}.login-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{align-self:stretch}.login-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin:1rem 0}.login-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:before, .login-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:linear-gradient(to right,transparent,var(--border-primary),transparent)}.login-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-muted);white-space:nowrap;font-weight:500}']})};function Ot(e){try{let n=e.split(".")[1];if(!n)return!0;let t=JSON.parse(atob(n));if(!t.exp)return!1;let o=t.exp*1e3,g=Date.now(),O=30*1e3;return g>=o-O}catch(n){return console.error("Error parsing token:",n),!0}}function mt(){localStorage.removeItem("token"),localStorage.removeItem("user")}var dt=(e,n)=>{let t=a(G),o=localStorage.getItem("token"),g=localStorage.getItem("user");if(!o||!g)return t.navigate(["/login"]),!1;if(Ot(o))return console.warn("Token has expired, redirecting to login"),mt(),t.navigate(["/login"]),!1;try{return JSON.parse(g),!0}catch(O){return console.error("Error parsing user data:",O),mt(),t.navigate(["/login"]),!1}};var ut=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:f},{path:"auth/callback",loadComponent:()=>import("./chunk-DCKKNCP3.js").then(e=>e.AuthCallbackComponent)},{path:"dashboard",loadComponent:()=>import("./chunk-F3HOJ3FV.js").then(e=>e.DashboardComponent),canActivate:[dt]}];var ht=(e,n)=>{let t=localStorage.getItem("token");if(t){let o=e.clone({setHeaders:{Authorization:`Bearer ${t}`}});return n(o)}return n(e)};var ft={providers:[v(),L(D([ht])),B(ut),q([at,gt]),j({heroPencil:R,heroTrash:J,heroPlus:V,heroMoon:H,heroSun:W})]};var C=class e{themeService=a(ct);static \u0275fac=function(t){return new(t||e)};static \u0275cmp=p({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(t,o){t&1&&(r(0,"div"),s(1,"router-outlet"),i())},dependencies:[N],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%}router-outlet[_ngcontent-%COMP%]{display:block;height:100%}"]})};T(C,ft).catch(e=>console.error(e));
