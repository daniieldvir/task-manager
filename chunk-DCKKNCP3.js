import{a as h}from"./chunk-VMHCMT5G.js";import{Ca as g,J as i,La as p,M as r,Na as d,Ta as u,aa as o,ba as s,ca as c,pa as l,qa as m,t as n}from"./chunk-4ASC3FQQ.js";var f=class a{message="Verifying connection...";supabaseService=n(h);router=n(p);store=n(d);async ngOnInit(){try{let e=await this.supabaseService.getSession();e?(localStorage.setItem("token",e.access_token),localStorage.setItem("user",JSON.stringify({id:e.user.id,email:e.user.email})),this.message="Login successful! Moving to dashboard...",this.store.dispatch(new u.OAuthLoginSuccess({user:{id:e.user.id,email:e.user.email},token:e.access_token})),setTimeout(()=>{this.router.navigate(["/dashboard"])},500)):(this.message="No active session found.",setTimeout(()=>{this.router.navigate(["/login"])},2e3))}catch(e){console.error("OAuth callback error:",e),this.message="Login error. Trying again...",setTimeout(()=>{this.router.navigate(["/login"])},2e3)}}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=r({type:a,selectors:[["app-auth-callback"]],decls:4,vars:1,consts:[[1,"callback-container"],[1,"loading-spinner"]],template:function(t,b){t&1&&(o(0,"div",0),c(1,"div",1),o(2,"p"),l(3),s()()),t&2&&(i(3),m(b.message))},dependencies:[g],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:var(--bg-primary)}[_nghost-%COMP%]   .callback-container[_ngcontent-%COMP%]{text-align:center;color:var(--text-primary)}[_nghost-%COMP%]   .callback-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid var(--border-primary);border-top-color:var(--accent-indigo);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}[_nghost-%COMP%]   .callback-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-secondary)}"]})};export{f as AuthCallbackComponent};
